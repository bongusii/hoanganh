<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="https://github.com/bongusii/hoanganh/blob/main/icon.png?raw=true">
    <title>Phan Hoang Anh's Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Quicksand', sans-serif; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #111827; }
        ::-webkit-scrollbar-thumb { background: #374151; border-radius: 10px; }
        .portfolio-item { transition: transform 0.3s ease, opacity 0.3s ease; cursor: pointer; }
        .portfolio-item.hidden-item { transform: scale(0.9); opacity: 0; display: none; }
        /* CHANGED: Added new modal IDs to the style rules */
        #video-modal-overlay, #pdf-modal-overlay, #project-detail-modal-overlay, #review-modal-overlay { 
            transition: opacity 0.3s ease-in-out; 
        }
        #video-modal-content, #pdf-modal-content, #project-detail-modal-content, #review-modal-content { 
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out; 
        }
        .progress-ring__circle {
            transition: stroke-dashoffset 0.8s ease-out;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        #visitor-counter {
            transform: translateY(100px);
            transition: transform 0.8s ease-in-out, opacity 0.5s ease-in-out;
            opacity: 0;
        }
        #visitor-counter.show {
            transform: translateY(0);
            opacity: 1;
        }
        .rating { 
            display: inline-flex; 
            flex-direction: row-reverse; 
        }
        .rating > input { display: none; }
        .rating > label { 
            position: relative; 
            width: 1.1em; 
            font-size: 2rem; /* Adjusted size for better look */
            color: #FFD700; 
            cursor: pointer; 
            margin: 0 0.1em; /* Added slight margin */
        }
        .rating > label::before { content: "\2605"; position: absolute; opacity: 0.3; }
        .rating > label:hover:before,
        .rating > label:hover ~ label:before,
        .rating > input:checked ~ label:before { opacity: 1; }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 antialiased">

    <nav id="navbar" class="fixed w-full top-0 z-50 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <a href="#" class="text-2xl font-bold text-white tracking-wider">Phan Hoàng Anh</a>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#hero" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Trang chủ</a>
                        <a href="#about" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Giới thiệu</a>
                        <a href="#work" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Dự án</a>
                        <a href="#skills" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Kỹ năng</a>
                        <a href="#reviews" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Đánh giá</a>
                        <a href="#contact" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Liên hệ</a>
                    </div>
                </div>
                <div class="-mr-2 flex md:hidden">
                    <button id="mobile-menu-button" type="button" class="bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white">
                        <span class="sr-only">Mở menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="md:hidden hidden"><div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
            <a href="#hero" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Trang chủ</a>
            <a href="#about" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Giới thiệu</a>
            <a href="#work" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Dự án</a>
            <a href="#skills" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Kỹ năng</a>
            <a href="#reviews" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Đánh giá</a>
            <a href="#contact" class="nav-link text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Liên hệ</a>
        </div></div>
    </nav>
    <header id="hero" class="min-h-screen flex items-center bg-gray-900">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl md:text-6xl font-extrabold text-white leading-tight mb-4">Chào bạn, tôi là <span class="text-teal-400">Hoàng Anh</span></h1>
            <p class="text-lg md:text-2xl text-gray-300 max-w-3xl mx-auto">UI Developer, Graphics Designer, Photo & Videographer.<br>Tôi kiến tạo những trải nghiệm số và ghi lại những khoảnh khắc đẹp.</p>
            <div class="mt-8"><a href="#work" class="nav-link bg-teal-500 text-white font-bold py-3 px-8 rounded-full hover:bg-teal-600 transition duration-300 text-lg">Xem dự án của tôi</a></div>
        </div>
    </header>

    <main class="bg-gray-900">
        <section id="about" class="py-20 sm:py-32">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="lg:grid lg:grid-cols-3 lg:gap-8 items-center">
                    <div class="lg:col-span-1"><img class="rounded-lg shadow-2xl object-cover h-96 w-full lg:h-auto" src="https://github.com/bongusii/hoanganh/blob/main/BONGUSI.jpg?raw=true" alt="Ảnh chân dung của bạn" loading="lazy"></div>
                    <div class="mt-12 lg:mt-0 lg:col-span-2">
                        <h2 class="text-3xl font-bold text-white sm:text-4xl mb-6">Về tôi</h2>
                        <p class="text-lg text-gray-300 mb-4">Xin chào! Tôi là một người đam mê sáng tạo với nền tảng vững chắc về công nghệ và nghệ thuật. Với kinh nghiệm trong lĩnh vực lập trình giao diện người dùng (UI), tôi tập trung vào việc xây dựng các trang web và ứng dụng không chỉ mạnh mẽ về mặt chức năng mà còn tinh tế về mặt thẩm mỹ.</p>
                        <p class="text-lg text-gray-300 mb-4">Bên cạnh đó, nhiếp ảnh và quay phim là nơi tôi kể những câu chuyện bằng hình ảnh. Tôi yêu thích việc bắt trọn những cảm xúc chân thật và biến những ý tưởng thành những thước phim sống động. Sự kết hợp giữa tư duy logic của lập trình viên và con mắt nghệ thuật của người làm hình ảnh cho phép tôi tạo ra những sản phẩm độc đáo và toàn diện.</p>
                        <div class="mt-6"><a href="https://drive.google.com/uc?export=download&id=1AWEP93eF7O5FUH1sO8HbQ3JtLBLKDKwR" class="text-teal-400 font-semibold hover:text-teal-300">Tải CV của tôi <span aria-hidden="true">&rarr;</span></a></div>
                    </div>
                </div>
            </div>
        </section>
        <section id="work" class="py-20 sm:py-32 bg-gray-800/30">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center"><h2 class="text-3xl font-bold text-white sm:text-4xl">Dự án nổi bật</h2><p class="mt-4 text-lg text-gray-400">Một vài sản phẩm tôi đã thực hiện.</p></div>
                <div id="filter-buttons" class="flex justify-center space-x-2 md:space-x-4 my-10 flex-wrap">
                    <button class="filter-btn active bg-teal-500 text-white px-4 py-2 rounded-full text-sm font-medium" data-filter="all">Tất cả</button>
                    <button class="filter-btn bg-gray-700 text-gray-300 hover:bg-gray-600 px-4 py-2 rounded-full text-sm font-medium" data-filter="ui">Lập trình UI</button>
                    <button class="filter-btn bg-gray-700 text-gray-300 hover:bg-gray-600 px-4 py-2 rounded-full text-sm font-medium" data-filter="design">Thiết kế</button>
                    <button class="filter-btn bg-gray-700 text-gray-300 hover:bg-gray-600 px-4 py-2 rounded-full text-sm font-medium" data-filter="photo">Nhiếp ảnh</button>
                    <button class="filter-btn bg-gray-700 text-gray-300 hover:bg-gray-600 px-4 py-2 rounded-full text-sm font-medium" data-filter="video">Video</button>
                </div>
                <div id="portfolio-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div id="loading-spinner" class="col-span-full flex justify-center items-center p-16">
                        <svg class="animate-spin -ml-1 mr-3 h-10 w-10 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                        <span class="text-xl">Đang tải dự án...</span>
                    </div>
                </div>
            </div>
        </section>
        <section id="skills" class="py-20 sm:py-32">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold text-white sm:text-4xl">Công cụ & Kỹ năng</h2>
                    <p class="mt-4 text-lg text-gray-400">Nhấp vào từng kỹ năng để xem chứng chỉ liên quan.</p>
                </div>
                <div class="mt-20 max-w-5xl mx-auto grid grid-cols-2 sm:grid-cols-4 gap-y-12 gap-x-8">
                    <div class="skill-item-clickable flex flex-col items-center text-center transform transition-transform duration-300 hover:scale-105 cursor-pointer" data-pdf-url="https://drive.google.com/file/d/1SW7rLSqwkjG1EJf2BEetnKXd9iioM_sB/preview" data-skill-name="Chứng chỉ Adobe Illustrator">
                        <div class="relative w-32 h-32">
                            <svg class="w-full h-full" viewBox="0 0 120 120">
                                <circle class="text-gray-700" stroke-width="8" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60"/>
                                <circle class="progress-ring__circle text-teal-400" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60" style="stroke-dasharray: 314; stroke-dashoffset: calc(314 - (314 * 90) / 100);"/>
                            </svg>
                            <span class="absolute inset-0 flex items-center justify-center text-2xl font-bold text-white">90%</span>
                        </div>
                        <h3 class="mt-4 text-lg font-semibold text-white">Adobe Illustrator</h3>
                    </div>
                    <div class="skill-item-clickable flex flex-col items-center text-center transform transition-transform duration-300 hover:scale-105 cursor-pointer" data-pdf-url="https://drive.google.com/file/d/180nKtCpot_b18NmOXI8TBpd1smStpHiR/preview" data-skill-name="Chứng chỉ Adobe Photoshop">
                        <div class="relative w-32 h-32">
                            <svg class="w-full h-full" viewBox="0 0 120 120">
                                <circle class="text-gray-700" stroke-width="8" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60"/>
                                <circle class="progress-ring__circle text-teal-400" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60" style="stroke-dasharray: 314; stroke-dashoffset: calc(314 - (314 * 85) / 100);"/>
                            </svg>
                            <span class="absolute inset-0 flex items-center justify-center text-2xl font-bold text-white">85%</span>
                        </div>
                        <h3 class="mt-4 text-lg font-semibold text-white">Adobe Photoshop</h3>
                    </div>
                    <div class="skill-item-clickable flex flex-col items-center text-center transform transition-transform duration-300 hover:scale-105 cursor-pointer" data-pdf-url="#" data-skill-name="#">
                        <div class="relative w-32 h-32">
                            <svg class="w-full h-full" viewBox="0 0 120 120">
                                <circle class="text-gray-700" stroke-width="8" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60"/>
                                <circle class="progress-ring__circle text-teal-400" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60" style="stroke-dasharray: 314; stroke-dashoffset: calc(314 - (314 * 80) / 100);"/>
                            </svg>
                            <span class="absolute inset-0 flex items-center justify-center text-2xl font-bold text-white">80%</span>
                        </div>
                        <h3 class="mt-4 text-lg font-semibold text-white">Adobe Lightroom</h3>
                    </div>
                    <div class="skill-item-clickable flex flex-col items-center text-center transform transition-transform duration-300 hover:scale-105 cursor-pointer" data-pdf-url="#" data-skill-name="#">
                        <div class="relative w-32 h-32">
                            <svg class="w-full h-full" viewBox="0 0 120 120">
                                <circle class="text-gray-700" stroke-width="8" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60"/>
                                <circle class="progress-ring__circle text-teal-400" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60" style="stroke-dasharray: 314; stroke-dashoffset: calc(314 - (314 * 80) / 100);"/>
                            </svg>
                            <span class="absolute inset-0 flex items-center justify-center text-2xl font-bold text-white">80%</span>
                        </div>
                        <h3 class="mt-4 text-lg font-semibold text-white">DaVinci Resolve</h3>
                    </div>
                    <div class="skill-item-clickable flex flex-col items-center text-center transform transition-transform duration-300 hover:scale-105 cursor-pointer" data-pdf-url="https://drive.google.com/file/d/1L9D9sy74lprcvuBByDA8eg47kxHAKvrq/preview" data-skill-name="Chứng chỉ Microsoft Word">
                        <div class="relative w-32 h-32">
                            <svg class="w-full h-full" viewBox="0 0 120 120">
                                <circle class="text-gray-700" stroke-width="8" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60"/>
                                <circle class="progress-ring__circle text-teal-400" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60" style="stroke-dasharray: 314; stroke-dashoffset: calc(314 - (314 * 70) / 100);"/>
                            </svg>
                            <span class="absolute inset-0 flex items-center justify-center text-2xl font-bold text-white">70%</span>
                        </div>
                        <h3 class="mt-4 text-lg font-semibold text-white">Microsoft Word</h3>
                    </div>
                    <div class="skill-item-clickable flex flex-col items-center text-center transform transition-transform duration-300 hover:scale-105 cursor-pointer" data-pdf-url="https://drive.google.com/file/d/1I57E5D_B6hLqLm4WzlSYYPOEAw32V7HS/preview" data-skill-name="Chứng chỉ Microsoft Powerpoint">
                        <div class="relative w-32 h-32">
                            <svg class="w-full h-full" viewBox="0 0 120 120">
                                <circle class="text-gray-700" stroke-width="8" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60"/>
                                <circle class="progress-ring__circle text-teal-400" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60" style="stroke-dasharray: 314; stroke-dashoffset: calc(314 - (314 * 70) / 100);"/>
                            </svg>
                            <span class="absolute inset-0 flex items-center justify-center text-2xl font-bold text-white">70%</span>
                        </div>
                        <h3 class="mt-4 text-lg font-semibold text-white">Microsoft Powerpoint</h3>
                    </div>
                    <div class="skill-item-clickable flex flex-col items-center text-center transform transition-transform duration-300 hover:scale-105 cursor-pointer" data-pdf-url="https://drive.google.com/file/d/1DlF8K1zX8YdAS__1n-ME-HlxGpxnhkgJ/preview" data-skill-name="Chứng chỉ EFSET English Certificate">
                        <div class="relative w-32 h-32">
                            <svg class="w-full h-full" viewBox="0 0 120 120">
                                <circle class="text-gray-700" stroke-width="8" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60"/>
                                <circle class="progress-ring__circle text-teal-400" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60" style="stroke-dasharray: 314; stroke-dashoffset: calc(314 - (314 * 65) / 100);"/>
                            </svg>
                            <span class="absolute inset-0 flex items-center justify-center text-2xl font-bold text-white">65%</span>
                        </div>
                        <h3 class="mt-4 text-lg font-semibold text-white">English Certificate (EFSET)</h3>
                    </div>
                    <div class="skill-item-clickable flex flex-col items-center text-center transform transition-transform duration-300 hover:scale-105 cursor-pointer" data-pdf-url="#" data-skill-name="#">
                        <div class="relative w-32 h-32">
                            <svg class="w-full h-full" viewBox="0 0 120 120">
                                <circle class="text-gray-700" stroke-width="8" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60"/>
                                <circle class="progress-ring__circle text-teal-400" stroke-width="8" stroke-linecap="round" stroke="currentColor" fill="transparent" r="50" cx="60" cy="60" style="stroke-dasharray: 314; stroke-dashoffset: calc(314 - (314 * 80) / 100);"/>
                            </svg>
                            <span class="absolute inset-0 flex items-center justify-center text-2xl font-bold text-white">80%</span>
                        </div>
                        <h3 class="mt-4 text-lg font-semibold text-white">Cameras Using Skills</h3>
                    </div>
                </div>
            </div>
        </section>

        <section id="reviews" class="py-20 sm:py-32 bg-gray-800/30">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-3xl font-bold text-white sm:text-4xl">Đánh giá & Nhận xét</h2>
                <p class="mt-4 text-lg text-gray-400 max-w-2xl mx-auto">Mọi người nói gì về công việc của tôi. Mọi ý kiến đóng góp đều là nguồn động lực quý giá.</p>
                
                <div class="mt-8">
                    <button id="open-review-modal-btn" class="bg-teal-500 text-white font-bold py-3 px-8 rounded-full hover:bg-teal-600 transition duration-300 text-lg disabled:bg-gray-500 disabled:cursor-not-allowed">
                        Để lại đánh giá của bạn
                    </button>
                </div>

                <div id="reviews-list" class="mt-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 text-left">
                   <p class="col-span-full text-gray-400">Đang tải các đánh giá...</p>
                </div>
            </div>
        </section>

        <section id="contact" class="py-24 sm:py-40">
            <div class="max-w-3xl mx-auto text-center px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-white sm:text-4xl">Cùng hợp tác nhé!</h2>
                <p class="mt-4 text-lg text-gray-400">Tôi luôn sẵn sàng lắng nghe những ý tưởng mới và tham gia vào các dự án thú vị. Hãy liên hệ với tôi qua email hoặc các mạng xã hội bên dưới.</p>
                <p class="mt-4 text-lg text-gray-400">Hoặc qua số điện thoại: 0982.062.971</p>
                <div class="mt-8"><a href="mailto:bongusi9124@gmail.com" class="bg-teal-500 text-white font-bold py-3 px-8 rounded-full hover:bg-teal-600 transition duration-300 text-lg">Gửi Email</a></div>
                <div class="mt-10 flex justify-center space-x-6">
                    <a href="https://github.com/bongusii" class="text-gray-400 hover:text-white" aria-label="My GitHub Profile"><span class="sr-only">GitHub</span><i data-lucide="github" class="w-6 h-6"></i></a>
                    <a href="https://www.instagram.com/bongusi.9124" class="text-gray-400 hover:text-white" aria-label="My Instagram Profile"><span class="sr-only">Instagram</span><i data-lucide="instagram" class="w-6 h-6"></i></a>
                    <a href="https://www.youtube.com/@bongusiii" class="text-gray-400 hover:text-white" aria-label="My YouTube Channel"><span class="sr-only">YouTube</span><i data-lucide="youtube" class="w-6 h-6"></i></a>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800/30">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-gray-500">
            <p>&copy; 2025 Phan Hoang Anh. Đã đăng ký bản quyền.</p>
        </div>
    </footer>

    <div id="video-modal-overlay" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[51] opacity-0 pointer-events-none">
        <div id="video-modal-content" class="bg-black w-full max-w-4xl aspect-video rounded-lg shadow-2xl relative transform scale-95 opacity-0">
            <button id="close-video-modal-button" class="absolute -top-3 -right-3 text-white bg-gray-800 rounded-full p-1 z-10"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
            <iframe id="video-iframe" class="w-full h-full rounded-lg" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </div>
    <div id="pdf-modal-overlay" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[51] opacity-0 pointer-events-none">
        <div id="pdf-modal-content" class="bg-gray-700 w-full max-w-4xl h-[90vh] rounded-lg shadow-2xl relative transform scale-95 opacity-0 flex flex-col">
            <div class="flex justify-between items-center p-4 border-b border-gray-600 flex-shrink-0">
                <h3 id="pdf-modal-title" class="text-xl font-semibold text-white">Chứng chỉ</h3>
                <button id="close-pdf-modal-button" class="text-white bg-gray-800 rounded-full p-1 z-10"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
            </div>
            <div class="flex-grow p-2">
                <iframe id="pdf-iframe" class="w-full h-full rounded-b-lg" src="" frameborder="0"></iframe>
            </div>
        </div>
    </div>
    <div id="project-detail-modal-overlay" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[51] opacity-0 pointer-events-none p-4">
        <div id="project-detail-modal-content" class="bg-gray-800 w-full max-w-4xl max-h-[90vh] rounded-lg shadow-2xl relative transform scale-95 opacity-0 flex flex-col overflow-hidden">
            <div class="flex justify-between items-center p-4 border-b border-gray-700 flex-shrink-0">
                <h3 id="project-detail-title" class="text-xl font-semibold text-white">Chi tiết Dự án</h3>
                <button id="close-project-detail-modal-button" class="text-white bg-gray-900 rounded-full p-1 z-10"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
            </div>
            <div class="flex-grow overflow-y-auto">
                <img id="project-detail-image" src="" alt="Project Image" class="w-full h-auto object-cover" loading="lazy">
                <div class="p-6">
                    <div id="project-detail-tech" class="flex flex-wrap gap-2 mb-4"></div>
                    <p id="project-detail-description" class="text-gray-300 whitespace-pre-wrap"></p>
                </div>
            </div>
        </div>
    </div>
    
    <div id="review-modal-overlay" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[51] opacity-0 pointer-events-none p-4">
        <div id="review-modal-content" class="bg-gray-800 w-full max-w-lg rounded-lg shadow-2xl relative transform scale-95 opacity-0 flex flex-col">
            <div class="flex justify-between items-center p-4 border-b border-gray-700">
                <h3 class="text-xl font-semibold text-white">Gửi đánh giá của bạn</h3>
                <button id="close-review-modal-btn" class="text-white bg-gray-900 rounded-full p-1 z-10"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
            </div>
            <div class="p-6">
                <form id="review-form" class="space-y-6">
                    <div>
                        <label for="reviewer-name" class="block text-sm font-medium text-gray-300 text-left">Tên của bạn</label>
                        <input type="text" id="reviewer-name" ...>
                    </div>

                    <div class="text-center">
                        <label class="block text-sm font-medium text-gray-300 mb-2">Đánh giá của bạn</label>
                        <div class="rating">
                            </div>
                    </div>

                    <div>
                        <label for="reviewer-comment" class="block text-sm font-medium text-gray-300 text-left">Bình luận</label>
                        <textarea id="reviewer-comment" ...></textarea>
                    </div>

                    <button type="submit" ...>Gửi đánh giá</button>
                    <p id="review-form-status" ...></p>
                </form>
            </div>
        </div>
    </div>

    <div id="visitor-counter" class="fixed bottom-5 left-5 bg-gray-800/80 backdrop-blur-sm text-white py-2 px-4 rounded-lg shadow-lg flex items-center space-x-2 z-40">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        <p class="text-sm">Lượt truy cập: <span id="visit-count" class="font-bold">...</span></p>
    </div>

    <script type="module">
        import { db, projectsCollectionRef, reviewsCollectionRef } from './firebase-config.js';
        import { onSnapshot, doc, getDoc, updateDoc, increment, addDoc, serverTimestamp, query, orderBy, where } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- ALL ELEMENT REFERENCES ---
        const portfolioGrid = document.getElementById('portfolio-grid');
        const videoModalOverlay = document.getElementById('video-modal-overlay');
        const videoModalContent = document.getElementById('video-modal-content');
        const closeVideoModalButton = document.getElementById('close-video-modal-button');
        const videoIframe = document.getElementById('video-iframe');
        const pdfModalOverlay = document.getElementById('pdf-modal-overlay');
        const pdfModalContent = document.getElementById('pdf-modal-content');
        const closePdfModalButton = document.getElementById('close-pdf-modal-button');
        const pdfIframe = document.getElementById('pdf-iframe');
        const pdfModalTitle = document.getElementById('pdf-modal-title');
        const skillsContainer = document.getElementById('skills');
        const projectDetailModalOverlay = document.getElementById('project-detail-modal-overlay');
        const projectDetailModalContent = document.getElementById('project-detail-modal-content');
        const closeProjectDetailModalButton = document.getElementById('close-project-detail-modal-button');
        const projectDetailTitle = document.getElementById('project-detail-title');
        const projectDetailImage = document.getElementById('project-detail-image');
        const projectDetailTech = document.getElementById('project-detail-tech');
        const projectDetailDescription = document.getElementById('project-detail-description');
        
        // --- VISITOR COUNTER LOGIC ---
        const visitorCounterPopup = document.getElementById('visitor-counter');
        const visitCountSpan = document.getElementById('visit-count');
        const counterRef = doc(db, "counters", "visits");
        async function updateVisitorCount() {
            try {
                const hasVisited = sessionStorage.getItem('hasVisitedPortfolio');
                if (!hasVisited) {
                    await updateDoc(counterRef, { count: increment(1) });
                    sessionStorage.setItem('hasVisitedPortfolio', 'true');
                }
                const docSnap = await getDoc(counterRef);
                if (docSnap.exists()) {
                    visitCountSpan.textContent = docSnap.data().count.toLocaleString('vi-VN');
                } else {
                    console.error("Counter document ('counters/visits') does not exist!");
                    visitCountSpan.textContent = "N/A";
                }
                setTimeout(() => { visitorCounterPopup.classList.add('show'); }, 500);
            } catch (error) {
                console.error("Error updating visitor count:", error);
                visitCountSpan.textContent = "Lỗi";
                visitorCounterPopup.classList.add('show');
            }
        }

        // --- REVIEW MODAL AND SUBMISSION LOGIC ---
        let fetchedProjects = [];
        const reviewForm = document.getElementById('review-form');
        const reviewsList = document.getElementById('reviews-list');
        const reviewFormStatus = document.getElementById('review-form-status');
        const submitReviewBtn = document.getElementById('submit-review-btn');
        // NEW: Review modal elements
        const openReviewModalBtn = document.getElementById('open-review-modal-btn');
        const reviewModalOverlay = document.getElementById('review-modal-overlay');
        const reviewModalContent = document.getElementById('review-modal-content');
        const closeReviewModalBtn = document.getElementById('close-review-modal-btn');

        // NEW: Functions to control the review modal
        function openReviewModal() {
            reviewModalOverlay.classList.remove('opacity-0', 'pointer-events-none');
            reviewModalContent.classList.remove('opacity-0', 'scale-95');
        }
        function closeReviewModal() {
            reviewModalOverlay.classList.add('opacity-0', 'pointer-events-none');
            reviewModalContent.classList.add('opacity-0', 'scale-95');
        }

        // CHANGED: This function now controls the "open modal" button
        function setupReviewButton() {
            if (localStorage.getItem('hasSubmittedReview') === 'true') {
                openReviewModalBtn.disabled = true;
                openReviewModalBtn.textContent = 'Cảm ơn, bạn đã gửi đánh giá!';
            }
        }

        async function handleReviewSubmit(e) {
            e.preventDefault();
            submitReviewBtn.disabled = true;
            submitReviewBtn.textContent = 'Đang gửi...';

            const name = reviewForm.elements.name.value.trim();
            const rating = reviewForm.elements.rating.value;
            const comment = reviewForm.elements.comment.value.trim();

            if (!name || !rating || !comment) {
                reviewFormStatus.textContent = 'Vui lòng điền đầy đủ thông tin.';
                reviewFormStatus.style.color = '#F87171';
                submitReviewBtn.disabled = false;
                submitReviewBtn.textContent = 'Gửi đánh giá';
                return;
            }

            try {
                await addDoc(reviewsCollectionRef, {
                    name: name,
                    rating: parseInt(rating, 10),
                    comment: comment,
                    timestamp: serverTimestamp(),
                    approved: false 
                });
                
                localStorage.setItem('hasSubmittedReview', 'true');
                reviewForm.reset();
                setupReviewButton(); // Update the button state
                
                // Show success message and close modal after a delay
                reviewFormStatus.textContent = 'Gửi thành công! Đánh giá của bạn đang chờ duyệt.';
                reviewFormStatus.style.color = '#34D399';
                setTimeout(() => {
                    closeReviewModal();
                    reviewFormStatus.textContent = ''; // Clear status
                    submitReviewBtn.disabled = false;
                    submitReviewBtn.textContent = 'Gửi đánh giá';
                }, 2000);

            } catch (error) {
                console.error("Error adding review: ", error);
                reviewFormStatus.textContent = 'Đã xảy ra lỗi. Vui lòng thử lại.';
                reviewFormStatus.style.color = '#F87171';
                submitReviewBtn.disabled = false;
                submitReviewBtn.textContent = 'Gửi đánh giá';
            }
        }

        function renderStars(rating) {
            let starsHtml = '';
            for (let i = 0; i < 5; i++) {
                starsHtml += `<svg class="w-5 h-5 ${i < rating ? 'text-yellow-400' : 'text-gray-500'}" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>`;
            }
            return `<div class="flex items-center">${starsHtml}</div>`;
        }

        const reviewsQuery = query(reviewsCollectionRef, where("approved", "==", true), orderBy('timestamp', 'desc'));
        onSnapshot(reviewsQuery, (snapshot) => {
            reviewsList.innerHTML = '';
            if (snapshot.empty) {
                reviewsList.innerHTML = '<p class="col-span-full text-gray-400">Chưa có đánh giá nào được hiển thị.</p>';
                return;
            }
            snapshot.forEach(doc => {
                const review = doc.data();
                const reviewElement = document.createElement('div');
                // CHANGED: Display each review in its own card
                reviewElement.className = 'bg-gray-800 p-6 rounded-lg text-left';
                const reviewDate = review.timestamp ? review.timestamp.toDate().toLocaleDateString('vi-VN') : '';
                
                reviewElement.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <h4 class="font-bold text-white text-lg">${review.name}</h4>
                            <p class="text-xs text-gray-500 mt-1">${reviewDate}</p>
                        </div>
                        ${renderStars(review.rating)}
                    </div>
                    <p class="mt-4 text-gray-300 italic">"${review.comment}"</p>
                `;
                reviewsList.appendChild(reviewElement);
            });
        });

        // --- EXISTING PORTFOLIO AND OTHER MODAL LOGIC (No changes below this line) ---
        function getYoutubeVideoId(url) {
            let videoId = '';
            const youtubeRegex = /^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
            const match = url.match(youtubeRegex);
            if (match) { videoId = match[1]; }
            return videoId;
        }
        function renderPortfolio(projects) {
            fetchedProjects = projects;
            if (!portfolioGrid) return;
            portfolioGrid.innerHTML = '';
            if (projects.length === 0) { 
                portfolioGrid.innerHTML = `<p class="col-span-full text-center text-gray-400">Chưa có dự án nào được thêm.</p>`;
                return;
            }
            const categoryMap = { ui: 'Lập trình UI', design: 'Thiết kế', photo: 'Nhiếp ảnh', video: 'Video' };
            projects.forEach(project => {
                const item = document.createElement('div');
                item.className = 'portfolio-item group relative overflow-hidden rounded-lg shadow-lg';
                item.dataset.category = project.category;
                item.dataset.id = project.id;
                let imageUrl, playIconOverlay = '';
                if (project.thumbnailUrl && project.thumbnailUrl.trim() !== '') { imageUrl = project.thumbnailUrl; } else if (project.category === 'video') { const videoId = getYoutubeVideoId(project.url); imageUrl = videoId ? `https://img.youtube.com/vi/${videoId}/hqdefault.jpg` : project.url; } else { imageUrl = project.url; }
                if (project.category === 'video') { playIconOverlay = `<div class="absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"><svg class="w-16 h-16 text-white opacity-80" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg></div>`; }
                item.innerHTML = `<img src="${imageUrl}" alt="${project.title}" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/600x400/1f2937/34d399?text=Image+Error';"><div class="absolute inset-0 bg-black bg-opacity-60 opacity-0 group-hover:opacity-100 transition-opacity duration-500 flex items-center justify-center p-4"><div class="text-center"><h3 class="text-xl font-bold text-white">${project.title}</h3><p class="text-sm text-gray-300 mt-1">${categoryMap[project.category] || 'Chung'}</p></div></div>${playIconOverlay}`;
                portfolioGrid.appendChild(item);
            });
        }
        function openVideoModal(videoUrl) {
            const videoId = getYoutubeVideoId(videoUrl);
            if (!videoId) return;
            videoIframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
            videoModalOverlay.classList.remove('opacity-0', 'pointer-events-none');
            videoModalContent.classList.remove('opacity-0', 'scale-95');
        }
        function closeVideoModal() {
            videoModalOverlay.classList.add('opacity-0', 'pointer-events-none');
            videoModalContent.classList.add('opacity-0', 'scale-95');
            setTimeout(() => { videoIframe.src = ''; }, 300);
        }
        function openPdfModal(pdfUrl, skillName) {
            if (!pdfUrl || pdfUrl.trim() === '#' || pdfUrl.trim() === '') return;
            pdfIframe.src = pdfUrl;
            pdfModalTitle.textContent = skillName || 'Chứng chỉ';
            pdfModalOverlay.classList.remove('opacity-0', 'pointer-events-none');
            pdfModalContent.classList.remove('opacity-0', 'scale-95');
        }
        function closePdfModal() {
            pdfModalOverlay.classList.add('opacity-0', 'pointer-events-none');
            pdfModalContent.classList.add('opacity-0', 'scale-95');
            setTimeout(() => { pdfIframe.src = ''; }, 300);
        }
        function openProjectDetailModal(project) {
            if (!project) return;
            projectDetailTitle.textContent = project.title;
            projectDetailImage.src = project.url;
            projectDetailDescription.textContent = project.description || 'Không có mô tả cho dự án này.';
            projectDetailTech.innerHTML = '';
            if (project.technologies) {
                project.technologies.split(',').forEach(tech => {
                    if (tech.trim() !== '') {
                        const tag = document.createElement('span');
                        tag.className = 'bg-teal-500/20 text-teal-300 text-xs font-medium px-2.5 py-1 rounded-full';
                        tag.textContent = tech.trim();
                        projectDetailTech.appendChild(tag);
                    }
                });
            }
            projectDetailModalOverlay.classList.remove('opacity-0', 'pointer-events-none');
            projectDetailModalContent.classList.remove('opacity-0', 'scale-95');
        }
        function closeProjectDetailModal() {
            projectDetailModalOverlay.classList.add('opacity-0', 'pointer-events-none');
            projectDetailModalContent.classList.add('opacity-0', 'scale-95');
        }

        // --- ALL EVENT LISTENERS ---
        // Review Modal listeners
        openReviewModalBtn.addEventListener('click', openReviewModal);
        closeReviewModalBtn.addEventListener('click', closeReviewModal);
        reviewModalOverlay.addEventListener('click', (e) => { if(e.target === reviewModalOverlay) closeReviewModal(); });
        reviewForm.addEventListener('submit', handleReviewSubmit);
        
        // Other listeners
        portfolioGrid.addEventListener('click', (e) => {
            const portfolioItem = e.target.closest('.portfolio-item');
            if (!portfolioItem) return;
            const projectId = portfolioItem.dataset.id;
            const project = fetchedProjects.find(p => p.id === projectId);
            if (!project) return;
            if (project.category === 'video') {
                openVideoModal(project.url);
            } else {
                openProjectDetailModal(project);
            }
        });
        skillsContainer.addEventListener('click', (e) => { const skillItem = e.target.closest('.skill-item-clickable'); if (skillItem) { openPdfModal(skillItem.dataset.pdfUrl, skillItem.dataset.skillName); } });
        closeVideoModalButton.addEventListener('click', closeVideoModal);
        videoModalOverlay.addEventListener('click', (e) => { if (e.target === videoModalOverlay) closeVideoModal(); });
        closePdfModalButton.addEventListener('click', closePdfModal);
        pdfModalOverlay.addEventListener('click', (e) => { if (e.target === pdfModalOverlay) closePdfModal(); });
        closeProjectDetailModalButton.addEventListener('click', closeProjectDetailModal);
        projectDetailModalOverlay.addEventListener('click', (e) => { if (e.target === projectDetailModalOverlay) closeProjectDetailModal(); });
        onSnapshot(projectsCollectionRef, (snapshot) => { const projects = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })); renderPortfolio(projects); }, (error) => { console.error("Error fetching projects:", error); });
        const filterButtons = document.querySelectorAll('.filter-btn');
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                filterButtons.forEach(btn => {
                    btn.classList.remove('active', 'bg-teal-500', 'text-white');
                    btn.classList.add('bg-gray-700', 'text-gray-300');
                });
                button.classList.add('active', 'bg-teal-500', 'text-white');
                button.classList.remove('bg-gray-700', 'text-gray-300');
                const filter = button.dataset.filter;
                const items = portfolioGrid.querySelectorAll('.portfolio-item');
                items.forEach(item => {
                    if (filter === 'all' || item.dataset.category === filter) {
                        item.classList.remove('hidden-item');
                    } else {
                        item.classList.add('hidden-item');
                    }
                });
            });
        });
        lucide.createIcons();
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        if (mobileMenuButton) {
            const mobileMenuIcons = mobileMenuButton.querySelectorAll('svg');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
                mobileMenuIcons.forEach(icon => icon.classList.toggle('hidden'));
            });
        }
        document.querySelectorAll('a.nav-link').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if(targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
                if(mobileMenu && !mobileMenu.classList.contains('hidden')) {
                     mobileMenu.classList.add('hidden');
                     mobileMenuButton.querySelectorAll('svg').forEach(icon => icon.classList.toggle('hidden'));
                }
            });
        });
        const navbar = document.getElementById('navbar');
        window.onscroll = function() {
            if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
                navbar.classList.add("bg-gray-900/80", "backdrop-blur-sm", "shadow-lg");
            } else {
                navbar.classList.remove("bg-gray-900/80", "backdrop-blur-sm", "shadow-lg");
            }
        };

        // --- INITIALIZE PAGE ---
        updateVisitorCount();
        setupReviewButton(); 
    </script>
</body>
</html>